var x=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},$e=class{static fromArray(t,r){let n=r||new h;for(let i=t.length-1;i>=0;--i)n=new xe(t[i],n);return n}[Symbol.iterator](){return new Br(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof h}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function f(e,t){return new xe(e,t)}function c(e,t){return $e.fromArray(e,t)}var Br=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof h)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},h=class extends $e{},xe=class extends $e{constructor(t,r){super(),this.head=t,this.tail=r}},Zt=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return jt(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=jt(this.rawBuffer,this.bitOffset,i),o=jt(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=jt(this.rawBuffer,this.bitOffset,r),s=jt(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(Xn("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(Xn("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function jt(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var Jn={};function Xn(e,t){Jn[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),Jn[e]=!0)}var Et=class e extends x{static isResult(t){return t instanceof e}},S=class extends Et{constructor(t){super(),this[0]=t}isOk(){return!0}},B=class extends Et{constructor(t){super(),this[0]=t}isOk(){return!1}};function X(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!Kn(n)||!Kn(i)||!io(n,i)||Qs(n,i)||Zs(n,i)||eo(n,i)||to(n,i)||ro(n,i)||no(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[u,l]=Ks(n),a=u(n),p=u(i);if(a.length!==p.length)return!1;for(let m of a)r.push(l(n,m),l(i,m))}return!0}function Ks(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function Qs(e,t){return e instanceof Date&&(e>t||e<t)}function Zs(e,t){return!(e instanceof Zt)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function eo(e,t){return Array.isArray(e)&&e.length!==t.length}function to(e,t){return e instanceof Map&&e.size!==t.size}function ro(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function no(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Kn(e){return typeof e=="object"&&e!==null}function io(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function er(e,t,r,n,i,s,o){let u=new globalThis.Error(s);u.gleam_error=e,u.file=t,u.module=r,u.line=n,u.function=i,u.fn=i;for(let l in o)u[l]=o[l];return u}var K=class extends x{constructor(t){super(),this[0]=t}},Q=class extends x{};var Qn=new WeakMap,qr=new DataView(new ArrayBuffer(8)),Or=0;function Nr(e){let t=Qn.get(e);if(t!==void 0)return t;let r=Or++;return Or===2147483647&&(Or=0),Qn.set(e,r),r}function Ir(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function Mr(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function ei(e){qr.setFloat64(0,e);let t=qr.getInt32(0),r=qr.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function so(e){return Mr(e.toString())}function oo(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return Nr(e);if(e instanceof Date)return ei(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+de(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+de(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+Ir(de(n),de(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+Ir(de(o),Mr(s))|0}}return r}function de(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return ei(e);case"string":return Mr(e);case"bigint":return so(e);case"object":return oo(e);case"symbol":return Nr(e);case"function":return Nr(e);default:return 0}}var ve=5,Ur=Math.pow(2,ve),uo=Ur-1,lo=Ur/2,ao=Ur/4,ne=0,ge=1,ue=2,He=3,Dr={type:ue,bitmap:0,array:[]};function St(e,t){return e>>>t&uo}function nr(e,t){return 1<<St(e,t)}function co(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Wr(e,t){return co(e&t-1)}function he(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function fo(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function Lr(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function ti(e,t,r,n,i,s){let o=de(t);if(o===n)return{type:He,hash:o,array:[{type:ne,k:t,v:r},{type:ne,k:i,v:s}]};let u={val:!1};return Tt(Fr(Dr,e,o,t,r,u),e,n,i,s,u)}function Tt(e,t,r,n,i,s){switch(e.type){case ge:return po(e,t,r,n,i,s);case ue:return Fr(e,t,r,n,i,s);case He:return ho(e,t,r,n,i,s)}}function po(e,t,r,n,i,s){let o=St(r,t),u=e.array[o];if(u===void 0)return s.val=!0,{type:ge,size:e.size+1,array:he(e.array,o,{type:ne,k:n,v:i})};if(u.type===ne)return X(n,u.k)?i===u.v?e:{type:ge,size:e.size,array:he(e.array,o,{type:ne,k:n,v:i})}:(s.val=!0,{type:ge,size:e.size,array:he(e.array,o,ti(t+ve,u.k,u.v,r,n,i))});let l=Tt(u,t+ve,r,n,i,s);return l===u?e:{type:ge,size:e.size,array:he(e.array,o,l)}}function Fr(e,t,r,n,i,s){let o=nr(r,t),u=Wr(e.bitmap,o);if((e.bitmap&o)!==0){let l=e.array[u];if(l.type!==ne){let p=Tt(l,t+ve,r,n,i,s);return p===l?e:{type:ue,bitmap:e.bitmap,array:he(e.array,u,p)}}let a=l.k;return X(n,a)?i===l.v?e:{type:ue,bitmap:e.bitmap,array:he(e.array,u,{type:ne,k:n,v:i})}:(s.val=!0,{type:ue,bitmap:e.bitmap,array:he(e.array,u,ti(t+ve,a,l.v,r,n,i))})}else{let l=e.array.length;if(l>=lo){let a=new Array(32),p=St(r,t);a[p]=Fr(Dr,t+ve,r,n,i,s);let m=0,$=e.bitmap;for(let y=0;y<32;y++){if(($&1)!==0){let b=e.array[m++];a[y]=b}$=$>>>1}return{type:ge,size:l+1,array:a}}else{let a=fo(e.array,u,{type:ne,k:n,v:i});return s.val=!0,{type:ue,bitmap:e.bitmap|o,array:a}}}}function ho(e,t,r,n,i,s){if(r===e.hash){let o=Pr(e,n);if(o!==-1)return e.array[o].v===i?e:{type:He,hash:r,array:he(e.array,o,{type:ne,k:n,v:i})};let u=e.array.length;return s.val=!0,{type:He,hash:r,array:he(e.array,u,{type:ne,k:n,v:i})}}return Tt({type:ue,bitmap:nr(e.hash,t),array:[e]},t,r,n,i,s)}function Pr(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(X(t,e.array[n].k))return n;return-1}function rr(e,t,r,n){switch(e.type){case ge:return mo(e,t,r,n);case ue:return _o(e,t,r,n);case He:return $o(e,n)}}function mo(e,t,r,n){let i=St(r,t),s=e.array[i];if(s!==void 0){if(s.type!==ne)return rr(s,t+ve,r,n);if(X(n,s.k))return s}}function _o(e,t,r,n){let i=nr(r,t);if((e.bitmap&i)===0)return;let s=Wr(e.bitmap,i),o=e.array[s];if(o.type!==ne)return rr(o,t+ve,r,n);if(X(n,o.k))return o}function $o(e,t){let r=Pr(e,t);if(!(r<0))return e.array[r]}function Rr(e,t,r,n){switch(e.type){case ge:return xo(e,t,r,n);case ue:return wo(e,t,r,n);case He:return bo(e,n)}}function xo(e,t,r,n){let i=St(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===ne){if(!X(s.k,n))return e}else if(o=Rr(s,t+ve,r,n),o===s)return e;if(o===void 0){if(e.size<=ao){let u=e.array,l=new Array(e.size-1),a=0,p=0,m=0;for(;a<i;){let $=u[a];$!==void 0&&(l[p]=$,m|=1<<a,++p),++a}for(++a;a<u.length;){let $=u[a];$!==void 0&&(l[p]=$,m|=1<<a,++p),++a}return{type:ue,bitmap:m,array:l}}return{type:ge,size:e.size-1,array:he(e.array,i,o)}}return{type:ge,size:e.size,array:he(e.array,i,o)}}function wo(e,t,r,n){let i=nr(r,t);if((e.bitmap&i)===0)return e;let s=Wr(e.bitmap,i),o=e.array[s];if(o.type!==ne){let u=Rr(o,t+ve,r,n);return u===o?e:u!==void 0?{type:ue,bitmap:e.bitmap,array:he(e.array,s,u)}:e.bitmap===i?void 0:{type:ue,bitmap:e.bitmap^i,array:Lr(e.array,s)}}return X(n,o.k)?e.bitmap===i?void 0:{type:ue,bitmap:e.bitmap^i,array:Lr(e.array,s)}:e}function bo(e,t){let r=Pr(e,t);if(r<0)return e;if(e.array.length!==1)return{type:He,hash:e.hash,array:Lr(e.array,r)}}function ri(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===ne){t(s.v,s.k);continue}ri(s,t)}}}var ut=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=rr(this.root,0,de(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?Dr:this.root,s=Tt(i,0,de(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=Rr(this.root,0,de(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:rr(this.root,0,de(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){ri(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+Ir(de(r),de(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!X(t.get(n,!r),r))throw Zn}),!0}catch(r){if(r===Zn)return!1;throw r}}},Zn=Symbol();var F=class extends x{},P=class extends x{},ke=class extends x{};function sr(e,t){return e===t?new P:e<t?new F:new ke}var ee=class extends x{},Je=class extends x{};function At(e,t){for(;;){let r=e,n=t;if(r instanceof h)return n;{let i=r.head;e=r.tail,t=f(i,n)}}}function H(e){return At(e,c([]))}function Eo(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof h)return H(s);{let o=n.head;e=n.tail,t=i,r=f(i(o),s)}}}function je(e,t){return Eo(e,t,c([]))}function So(e,t){for(;;){let r=e,n=t;if(r instanceof h)return n;{let i=r.head;e=r.tail,t=f(i,n)}}}function zt(e,t){return So(H(e),t)}function we(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof h)return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function To(e,t,r,n,i,s){for(;;){let o=e,u=t,l=r,a=n,p=i,m=s,$=f(p,l);if(o instanceof h)return a instanceof ee?f(H($),m):f($,m);{let y=o.head,b=o.tail,j=u(p,y);if(a instanceof ee)if(j instanceof F)e=b,t=u,r=$,n=a,i=y,s=m;else if(j instanceof P)e=b,t=u,r=$,n=a,i=y,s=m;else{let _;a instanceof ee?_=f(H($),m):_=f($,m);let E=_;if(b instanceof h)return f(c([y]),E);{let w=b.head,v=b.tail,A,d=u(y,w);d instanceof F?A=new ee:d instanceof P?A=new ee:A=new Je;let g=A;e=v,t=u,r=c([y]),n=g,i=w,s=E}}else if(j instanceof F){let _;a instanceof ee?_=f(H($),m):_=f($,m);let E=_;if(b instanceof h)return f(c([y]),E);{let w=b.head,v=b.tail,A,d=u(y,w);d instanceof F?A=new ee:d instanceof P?A=new ee:A=new Je;let g=A;e=v,t=u,r=c([y]),n=g,i=w,s=E}}else if(j instanceof P){let _;a instanceof ee?_=f(H($),m):_=f($,m);let E=_;if(b instanceof h)return f(c([y]),E);{let w=b.head,v=b.tail,A,d=u(y,w);d instanceof F?A=new ee:d instanceof P?A=new ee:A=new Je;let g=A;e=v,t=u,r=c([y]),n=g,i=w,s=E}}else e=b,t=u,r=$,n=a,i=y,s=m}}}function Ao(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i instanceof h)return At(s,u);if(s instanceof h)return At(i,u);{let l=i.head,a=i.tail,p=s.head,m=s.tail,$=o(l,p);$ instanceof F?(e=a,t=s,r=o,n=f(l,u)):$ instanceof P?(e=i,t=m,r=o,n=f(p,u)):(e=i,t=m,r=o,n=f(p,u))}}}function zo(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof h)return H(s);{let o=n.tail;if(o instanceof h){let u=n.head;return H(f(H(u),s))}else{let u=n.head,l=o.head,a=o.tail,p=Ao(u,l,i,c([]));e=a,t=i,r=f(p,s)}}}}function Co(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i instanceof h)return At(s,u);if(s instanceof h)return At(i,u);{let l=i.head,a=i.tail,p=s.head,m=s.tail,$=o(l,p);$ instanceof F?(e=i,t=m,r=o,n=f(p,u)):$ instanceof P?(e=a,t=s,r=o,n=f(l,u)):(e=a,t=s,r=o,n=f(l,u))}}}function Bo(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof h)return H(s);{let o=n.tail;if(o instanceof h){let u=n.head;return H(f(H(u),s))}else{let u=n.head,l=o.head,a=o.tail,p=Co(u,l,i,c([]));e=a,t=i,r=f(p,s)}}}}function qo(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof h)return n;if(i instanceof ee){if(n.tail instanceof h)return n.head;e=zo(n,s,c([])),t=new Je,r=s}else if(n.tail instanceof h){let u=n.head;return H(u)}else e=Bo(n,s,c([])),t=new ee,r=s}}function Ct(e,t){if(e instanceof h)return e;{let r=e.tail;if(r instanceof h)return e;{let n=e.head,i=r.head,s=r.tail,o,u=t(n,i);u instanceof F?o=new ee:u instanceof P?o=new ee:o=new Je;let l=o,a=To(s,t,c([n]),l,i,c([]));return qo(a,new ee,t)}}}function Oo(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof h)return s;{let o=n.head,u=n.tail,l=i(o,s);l instanceof F||l instanceof P?(e=u,t=i,r=s):(e=u,t=i,r=o)}}}function li(e,t){if(e instanceof h)return new B(void 0);{let r=e.head,n=e.tail;return new S(Oo(n,t,r))}}function Uo(e,t){for(;;){let r=e,n=t;if(r instanceof h)return n;{let i=r.head;e=r.tail,t=n+i}}}function ur(e){return Uo(e,"")}function Jr(e,t){if(t==="")return Hr(e);{let n=e,i=Yr(n,t);return je(i,V)}}var Xr=class extends x{constructor(t){super(),this.function=t}};function ct(e,t){let r=t.function(e),n,i;return n=r[0],i=r[1],i instanceof h?new S(n):new B(i)}function fi(e,t){return new Xr(r=>{let n=e.function(r),i,s;return i=n[0],s=n[1],[t(i),s]})}var mi=void 0,di={};function V(e){return e}function Gr(e){return/^[-+]?(\d+)$/.test(e)?new S(parseInt(e)):new B(mi)}function Be(e){return e.toString()}function Hr(e){let t=Yo(e);return t?$e.fromArray(Array.from(t).map(r=>r.segment)):$e.fromArray(e.match(/./gsu))}var hi;function Yo(e){if(globalThis.Intl&&Intl.Segmenter)return hi||=new Intl.Segmenter,hi.segment(e)[Symbol.iterator]()}function Yr(e,t){return $e.fromArray(e.split(t))}function Ot(e,t){return e.startsWith(t)}var _i=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),tc=new RegExp(`^[${_i}]*`),rc=new RegExp(`[${_i}]*$`);function at(){return ut.new()}function Kr(e){return $e.fromArray(e.entries())}function Me(e,t){let r=e.get(t,di);return r===di?new B(mi):new S(r)}function $i(e,t,r){return r.set(e,t)}function Bt(e,t,r){return $i(t,r,e)}function Jo(e,t){for(;;){let r=e,n=t;if(r instanceof h)return n;{let i=r.tail,s=r.head[0],o=r.head[1];e=i,t=Bt(n,s,o)}}}function ir(e){return Jo(e,at())}function xi(e,t){for(;;){let r=e,n=t;if(r instanceof h)return n;{let i=r.head;e=r.tail,t=f(i,n)}}}function Xo(e,t){for(;;){let r=e,n=t;if(r instanceof h)return xi(n,c([]));{let i=r.tail,s=r.head[0];e=i,t=f(s,n)}}}function lr(e){return Xo(Kr(e),c([]))}function Ko(e,t){for(;;){let r=e,n=t;if(r instanceof h)return xi(n,c([]));{let i=r.tail,s=r.head[1];e=i,t=f(s,n)}}}function Vr(e){let t=Kr(e);return Ko(t,c([]))}var Nt=class extends x{constructor(t,r,n,i,s,o,u){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=u}};function Qo(e,t){for(;;){let r=e,n=t;if(r instanceof h)return H(n);{let i=r.head,s=r.tail,o;i===""||i==="."?o=n:i===".."?n instanceof h?o=n:o=n.tail:o=f(i,n);let u=o;e=s,t=u}}}function Zo(e){return Qo(e,c([]))}function bi(e){return Zo(Jr(e,"/"))}function ar(e,t,r){return e?t:r()}function te(e){return e}var me=()=>globalThis?.document,cr="http://www.w3.org/1999/xhtml",fr=1,Zr=3;var ji=!!globalThis.HTMLElement?.prototype?.moveBefore;var T=c([]),pr=new Q;var iu=new ke,su=new F,ou=new P;function hr(e,t){return e.name===t.name?ou:e.name<t.name?su:iu}var le=class extends x{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},Lt=class extends x{constructor(t,r,n){super(),this.kind=t,this.name=r,this.value=n}},ae=class extends x{constructor(t,r,n,i,s,o,u,l,a){super(),this.kind=t,this.name=r,this.handler=n,this.include=i,this.prevent_default=s,this.stop_propagation=o,this.immediate=u,this.debounce=l,this.throttle=a}},mr=class extends x{constructor(t,r,n){super(),this.prevent_default=t,this.stop_propagation=r,this.message=n}};function pu(e,t){for(;;){let r=e,n=t;if(r instanceof h)return n;{let i=r.head;if(i instanceof le){let s=i.name;if(s==="")e=r.tail,t=n;else if(s==="class"){let o=i.value;if(o==="")e=r.tail,t=n;else{let u=r.tail;if(u instanceof h){let l=i;e=u,t=f(l,n)}else{let l=u.head;if(l instanceof le)if(l.name==="class"){let p=i.kind,m=o,$=u.tail,y=l.value,b=m+" "+y,j=new le(p,"class",b);e=f(j,$),t=n}else{let p=i;e=u,t=f(p,n)}else{let a=i;e=u,t=f(a,n)}}}}else if(s==="style"){let o=i.value;if(o==="")e=r.tail,t=n;else{let u=r.tail;if(u instanceof h){let l=i;e=u,t=f(l,n)}else{let l=u.head;if(l instanceof le)if(l.name==="style"){let p=i.kind,m=o,$=u.tail,y=l.value,b=m+";"+y,j=new le(p,"style",b);e=f(j,$),t=n}else{let p=i;e=u,t=f(p,n)}else{let a=i;e=u,t=f(a,n)}}}}else{let o=i;e=r.tail,t=f(o,n)}}else{let s=i;e=r.tail,t=f(s,n)}}}}function Bi(e){if(e instanceof h)return e;if(e.tail instanceof h)return e;{let n=Ct(e,(i,s)=>hr(s,i));return pu(n,T)}}var tn=0;function qi(e,t){return new le(tn,e,t)}var Oi=1;var Ni=2;var Ii=0;var rn=2;function Ee(e,t){return qi(e,t)}function ht(e){return Ee("class",e)}function Li(e,t){for(;;){let r=e,n=t;if(r instanceof h)return n;if(r.head[1]){let s=r.tail,o=r.head[0];return n+o+" "+Li(s,n)}else e=r.tail,t=n}}function Mi(e){return ht(Li(e,""))}function mt(e){return Ee("href",e)}function Mt(e){return Ee("target",e)}function Ut(e){return Ee("rel",e)}function Ui(e){return Ee("alt",e)}function Di(e){return Ee("src",e)}var $r=class extends x{constructor(t,r,n){super(),this.synchronous=t,this.before_paint=r,this.after_paint=n}};var sn=new $r(c([]),c([]),c([]));function Dt(){return sn}function Wi(e){let t=r=>{let n=r.dispatch;return e(n)};return new $r(c([t]),sn.before_paint,sn.after_paint)}function ce(){return null}function Wt(e,t){let r=e?.get(t);return r!=null?new S(r):new B(void 0)}function Ft(e,t){return e&&e.has(t)}function Xe(e,t,r){return e??=new Map,e.set(t,r),e}function on(e,t){return e?.delete(t),e}var wr=class extends x{},br=class extends x{constructor(t,r){super(),this.key=t,this.parent=r}},un=class extends x{constructor(t,r){super(),this.index=t,this.parent=r}};function hu(e,t){for(;;){let r=e,n=t;if(n instanceof h)return!1;{let i=n.head,s=n.tail,o=Ot(r,i);if(o)return o;e=r,t=s}}}function _e(e,t,r){return r===""?new un(t,e):new br(r,e)}var Rt=new wr,Pt="	";function Fi(e,t){for(;;){let r=e,n=t;if(r instanceof wr){if(n instanceof h)return"";{let i=n.tail;return ur(i)}}else if(r instanceof br){let i=r.key;e=r.parent,t=f(Pt,f(i,n))}else{let i=r.index;e=r.parent,t=f(Pt,f(Be(i),n))}}}function Pi(e){return Fi(e,c([]))}function Ri(e,t){return t instanceof h?!1:hu(Pi(e),t)}var ln=`
`;function an(e,t){return Fi(e,c([ln,t]))}var fe=class extends x{constructor(t,r,n,i,s){super(),this.kind=t,this.key=r,this.mapper=n,this.children=i,this.keyed_children=s}},oe=class extends x{constructor(t,r,n,i,s,o,u,l,a,p){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.children=u,this.keyed_children=l,this.self_closing=a,this.void=p}},pe=class extends x{constructor(t,r,n,i){super(),this.kind=t,this.key=r,this.mapper=n,this.content=i}},Ke=class extends x{constructor(t,r,n,i,s,o,u){super(),this.kind=t,this.key=r,this.mapper=n,this.namespace=i,this.tag=s,this.attributes=o,this.inner_html=u}};function $u(e,t){return t===""?e==="area"||e==="base"||e==="br"||e==="col"||e==="embed"||e==="hr"||e==="img"||e==="input"||e==="link"||e==="meta"||e==="param"||e==="source"||e==="track"?!0:e==="wbr":!1}function Gi(e,t){return t instanceof fe?new fe(t.kind,e,t.mapper,t.children,t.keyed_children):t instanceof oe?new oe(t.kind,e,t.mapper,t.namespace,t.tag,t.attributes,t.children,t.keyed_children,t.self_closing,t.void):t instanceof pe?new pe(t.kind,e,t.mapper,t.content):new Ke(t.kind,e,t.mapper,t.namespace,t.tag,t.attributes,t.inner_html)}var be=0;function cn(e,t,r,n){return new fe(be,e,t,r,n)}var Qe=1;function Gt(e,t,r,n,i,s,o,u,l){return new oe(Qe,e,t,r,n,Bi(i),s,o,u,l||$u(n,r))}var $t=2;function fn(e,t,r){return new pe($t,e,t,r)}var Vi=3;var pn=(e,t)=>e===t,Ze=(e,t)=>{if(e===t)return!0;if(e==null||t==null)return!1;let r=typeof e;return r!==typeof t||r!=="object"||e.constructor!==t.constructor?!1:Array.isArray(e)?xu(e,t):wu(e,t)},xu=(e,t)=>{let r=e.length;if(r!==t.length)return!1;for(;r--;)if(!Ze(e[r],t[r]))return!1;return!0},wu=(e,t)=>{let r=Object.keys(e),n=r.length;if(Object.keys(t).length!==n)return!1;for(;n--;){let i=r[n];if(!Object.hasOwn(t,i)||!Ze(e[i],t[i]))return!1}return!0};var Se=class extends x{constructor(t,r,n){super(),this.handlers=t,this.dispatched_paths=r,this.next_dispatched_paths=n}};function Xi(){return new Se(ce(),T,T)}function Ki(e){return new Se(e.handlers,e.next_dispatched_paths,T)}function Qi(e,t,r){return on(e,an(t,r))}function Vt(e,t,r){let n=Qi(e.handlers,t,r);return new Se(n,e.dispatched_paths,e.next_dispatched_paths)}function Hi(e,t,r){return we(r,e,(n,i)=>{if(i instanceof ae){let s=i.name;return Qi(n,t,s)}else return n})}function Ht(e,t,r,n){let i=f(t,e.next_dispatched_paths),s=new Se(e.handlers,e.dispatched_paths,i),o=Wt(s.handlers,t+ln+r);if(o instanceof S){let u=o[0];return[s,ct(n,u)]}else return[s,new B(c([]))]}function vr(e,t){return Ri(t,e.dispatched_paths)}function Zi(e,t,r,n,i){return Xe(e,an(r,n),fi(i,s=>new mr(s.prevent_default,s.stop_propagation,t(s.message))))}function Yt(e,t,r,n,i){let s=Zi(e.handlers,t,r,n,i);return new Se(s,e.dispatched_paths,e.next_dispatched_paths)}function Yi(e,t,r,n){return we(n,e,(i,s)=>{if(s instanceof ae){let o=s.name,u=s.handler;return Zi(i,t,r,o,u)}else return i})}function We(e,t){let r=pn(e,te);return pn(t,te)?e:r?t:i=>e(t(i))}function Ji(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(u instanceof h)return i;{let l=u.head,a=u.tail;e=es(i,s,o,l),t=s,r=o+1,n=a}}}function es(e,t,r,n){if(n instanceof fe){let i=n.children,s=_e(t,r,n.key);return Ji(e,s,0,i)}else if(n instanceof oe){let i=n.attributes,s=n.children,o=_e(t,r,n.key),l=Hi(e,o,i);return Ji(l,o,0,s)}else{if(n instanceof pe)return e;{let i=n.attributes,s=_e(t,r,n.key);return Hi(e,s,i)}}}function qe(e,t,r,n){let i=es(e.handlers,t,r,n);return new Se(i,e.dispatched_paths,e.next_dispatched_paths)}function dn(e,t,r,n,i){for(;;){let s=e,o=t,u=r,l=n,a=i;if(a instanceof h)return s;{let p=a.head,m=a.tail;e=ts(s,o,u,l,p),t=o,r=u,n=l+1,i=m}}}function ts(e,t,r,n,i){if(i instanceof fe){let s=i.children,o=_e(r,n,i.key),u=We(t,i.mapper);return dn(e,u,o,0,s)}else if(i instanceof oe){let s=i.attributes,o=i.children,u=_e(r,n,i.key),l=We(t,i.mapper),p=Yi(e,l,u,s);return dn(p,l,u,0,o)}else{if(i instanceof pe)return e;{let s=i.attributes,o=_e(r,n,i.key),u=We(t,i.mapper);return Yi(e,u,o,s)}}}function Fe(e,t,r,n,i){let s=ts(e.handlers,t,r,n,i);return new Se(s,e.dispatched_paths,e.next_dispatched_paths)}function rs(e,t,r,n,i){let s=dn(e.handlers,t,r,n,i);return new Se(s,e.dispatched_paths,e.next_dispatched_paths)}function re(e,t,r){return Gt("",te,"",e,t,r,ce(),!1,!1)}function kr(e){return fn("",te,e)}function ns(){return fn("",te,"")}function ie(e){return kr(e)}function jr(e,t){return re("article",e,t)}function is(e,t){return re("footer",e,t)}function ss(e,t){return re("header",e,t)}function os(e,t){return re("h1",e,t)}function us(e,t){return re("h2",e,t)}function hn(e,t){return re("h3",e,t)}function ls(e,t){return re("main",e,t)}function as(e,t){return re("nav",e,t)}function Er(e,t){return re("div",e,t)}function mn(e){return re("hr",e,T)}function cs(e,t){return re("li",e,t)}function wt(e,t){return re("p",e,t)}function fs(e,t){return re("ul",e,t)}function Te(e,t){return re("a",e,t)}function ps(e){return re("img",e,T)}var bt=class extends x{constructor(t,r,n,i){super(),this.index=t,this.removed=r,this.changes=n,this.children=i}},_n=class extends x{constructor(t,r){super(),this.kind=t,this.content=r}},$n=class extends x{constructor(t,r){super(),this.kind=t,this.inner_html=r}},xn=class extends x{constructor(t,r,n){super(),this.kind=t,this.added=r,this.removed=n}},wn=class extends x{constructor(t,r,n){super(),this.kind=t,this.key=r,this.before=n}},bn=class extends x{constructor(t,r,n){super(),this.kind=t,this.index=r,this.with=n}},yn=class extends x{constructor(t,r){super(),this.kind=t,this.index=r}},gn=class extends x{constructor(t,r,n){super(),this.kind=t,this.children=r,this.before=n}};function vn(e,t,r,n){return new bt(e,t,r,n)}var kn=0;function hs(e){return new _n(kn,e)}var jn=1;function ms(e){return new $n(jn,e)}var En=2;function Sn(e,t){return new xn(En,e,t)}var Tn=3;function _s(e,t){return new wn(Tn,e,t)}var An=4;function $s(e){return new yn(An,e)}var zn=5;function et(e,t){return new bn(zn,e,t)}var Cn=6;function Bn(e,t){return new gn(Cn,e,t)}var Sr=class extends x{constructor(t,r){super(),this.patch=t,this.events=r}},qn=class extends x{constructor(t,r,n){super(),this.added=t,this.removed=r,this.events=n}};function vu(e,t,r,n){return r==="input"&&t===""?vr(e,n):r==="select"&&t===""?vr(e,n):r==="textarea"&&t===""?vr(e,n):!1}function bs(e,t,r,n,i,s,o,u){for(;;){let l=e,a=t,p=r,m=n,$=i,y=s,b=o,j=u;if(y instanceof h){if($ instanceof h)return new qn(b,j,m);{let _=$.head;if(_ instanceof ae){let E=_,w=$.tail,v=_.name,A=f(E,j),d=Vt(m,a,v);e=l,t=a,r=p,n=d,i=w,s=y,o=b,u=A}else{let E=_,w=$.tail,v=f(E,j);e=l,t=a,r=p,n=m,i=w,s=y,o=b,u=v}}}else if($ instanceof h){let _=y.head;if(_ instanceof ae){let E=_,w=y.tail,v=_.name,A=_.handler,d=f(E,b),g=Yt(m,p,a,v,A);e=l,t=a,r=p,n=g,i=$,s=w,o=d,u=j}else{let E=_,w=y.tail,v=f(E,b);e=l,t=a,r=p,n=m,i=$,s=w,o=v,u=j}}else{let _=y.head,E=y.tail,w=$.head,v=$.tail,A=hr(w,_);if(A instanceof F)if(w instanceof ae){let d=w.name,g=f(w,j),k=Vt(m,a,d);e=l,t=a,r=p,n=k,i=v,s=y,o=b,u=g}else{let d=f(w,j);e=l,t=a,r=p,n=m,i=v,s=y,o=b,u=d}else if(A instanceof P)if(_ instanceof le)if(w instanceof le){let d,g=_.name;g==="value"||g==="checked"||g==="selected"?d=l||w.value!==_.value:d=w.value!==_.value;let k=d,C;k?C=f(_,b):C=b;let q=C;e=l,t=a,r=p,n=m,i=v,s=E,o=q,u=j}else if(w instanceof ae){let d=w.name,g=f(_,b),k=f(w,j),C=Vt(m,a,d);e=l,t=a,r=p,n=C,i=v,s=E,o=g,u=k}else{let d=f(_,b),g=f(w,j);e=l,t=a,r=p,n=m,i=v,s=E,o=d,u=g}else if(_ instanceof Lt)if(w instanceof Lt){let d,g=_.name;g==="scrollLeft"||g==="scrollRight"?d=!0:g==="value"?d=l||!Ze(w.value,_.value):g==="checked"?d=l||!Ze(w.value,_.value):g==="selected"?d=l||!Ze(w.value,_.value):d=!Ze(w.value,_.value);let k=d,C;k?C=f(_,b):C=b;let q=C;e=l,t=a,r=p,n=m,i=v,s=E,o=q,u=j}else if(w instanceof ae){let d=w.name,g=f(_,b),k=f(w,j),C=Vt(m,a,d);e=l,t=a,r=p,n=C,i=v,s=E,o=g,u=k}else{let d=f(_,b),g=f(w,j);e=l,t=a,r=p,n=m,i=v,s=E,o=d,u=g}else if(w instanceof ae){let d=_.name,g=_.handler,k=w.prevent_default.kind!==_.prevent_default.kind||w.stop_propagation.kind!==_.stop_propagation.kind||w.immediate!==_.immediate||w.debounce!==_.debounce||w.throttle!==_.throttle,C;k?C=f(_,b):C=b;let q=C,I=Yt(m,p,a,d,g);e=l,t=a,r=p,n=I,i=v,s=E,o=q,u=j}else{let d=_.name,g=_.handler,k=f(_,b),C=f(w,j),q=Yt(m,p,a,d,g);e=l,t=a,r=p,n=q,i=v,s=E,o=k,u=C}else if(_ instanceof ae){let d=_.name,g=_.handler,k=f(_,b),C=Yt(m,p,a,d,g);e=l,t=a,r=p,n=C,i=$,s=E,o=k,u=j}else{let d=f(_,b);e=l,t=a,r=p,n=m,i=$,s=E,o=d,u=j}}}}function On(e,t,r,n,i,s,o,u,l,a,p,m,$,y){for(;;){let b=e,j=t,_=r,E=n,w=i,v=s,A=o,d=u,g=l,k=a,C=p,q=m,I=$,J=y;if(_ instanceof h){if(b instanceof h)return new Sr(new bt(g,A,C,q),J);{let se=b.head,Ae=b.tail,R;se.key===""||!Ft(w,se.key)?R=A+1:R=A;let z=R,D=qe(J,k,d,se);e=Ae,t=j,r=_,n=E,i=w,s=v,o=z,u=d,l=g,a=k,p=C,m=q,$=I,y=D}}else if(b instanceof h){let se=rs(J,I,k,d,_),Ae=Bn(_,d-v),R=f(Ae,C);return new Sr(new bt(g,A,R,q),se)}else{let se=_.head,Ae=b.head;if(Ae.key!==se.key){let R=_.tail,W=b.tail,z=Wt(j,se.key),D=Ft(E,Ae.key);if(z instanceof S)if(D){let N=z[0];if(Ft(w,Ae.key))e=W,t=j,r=_,n=E,i=w,s=v-1,o=A,u=d,l=g,a=k,p=C,m=q,$=I,y=J;else{let U=d-v,O=f(_s(se.key,U),C),G=Xe(w,se.key,void 0),M=v+1;e=f(N,b),t=j,r=_,n=E,i=G,s=M,o=A,u=d,l=g,a=k,p=O,m=q,$=I,y=J}}else{let N=d-v,L=f($s(N),C),U=qe(J,k,d,Ae),O=v-1;e=W,t=j,r=_,n=E,i=w,s=O,o=A,u=d,l=g,a=k,p=L,m=q,$=I,y=U}else if(D){let N=d-v,L=Fe(J,I,k,d,se),U=Bn(c([se]),N),O=f(U,C);e=b,t=j,r=R,n=E,i=w,s=v+1,o=A,u=d+1,l=g,a=k,p=O,m=q,$=I,y=L}else{let N=et(d-v,se),L,O=qe(J,k,d,Ae);L=Fe(O,I,k,d,se);let G=L;e=W,t=j,r=R,n=E,i=w,s=v,o=A,u=d+1,l=g,a=k,p=f(N,C),m=q,$=I,y=G}}else{let R=b.head;if(R instanceof fe){let W=_.head;if(W instanceof fe){let z=W,D=_.tail,N=R,L=b.tail,U=We(I,z.mapper),O=_e(k,d,z.key),G=On(N.children,N.keyed_children,z.children,z.keyed_children,ce(),0,0,0,d,O,T,T,U,J),M,Y=G.patch;Y.children instanceof h?Y.changes instanceof h?Y.removed===0?M=q:M=f(G.patch,q):M=f(G.patch,q):M=f(G.patch,q);let ye=M;e=L,t=j,r=D,n=E,i=w,s=v,o=A,u=d+1,l=g,a=k,p=C,m=ye,$=I,y=G.events}else{let z=W,D=_.tail,N=R,L=b.tail,U=et(d-v,z),O,M=qe(J,k,d,N);O=Fe(M,I,k,d,z);let Y=O;e=L,t=j,r=D,n=E,i=w,s=v,o=A,u=d+1,l=g,a=k,p=f(U,C),m=q,$=I,y=Y}}else if(R instanceof oe){let W=_.head;if(W instanceof oe){let z=W,D=R;if(D.namespace===z.namespace&&D.tag===z.tag){let N=_.tail,L=b.tail,U=We(I,z.mapper),O=_e(k,d,z.key),G=vu(J,z.namespace,z.tag,O),M=bs(G,O,U,J,D.attributes,z.attributes,T,T),Y,ze,ye;Y=M.added,ze=M.removed,ye=M.events;let Ge;ze instanceof h&&Y instanceof h?Ge=T:Ge=c([Sn(Y,ze)]);let st=Ge,ot=On(D.children,D.keyed_children,z.children,z.keyed_children,ce(),0,0,0,d,O,st,T,U,ye),Le,Ve=ot.patch;Ve.children instanceof h?Ve.changes instanceof h?Ve.removed===0?Le=q:Le=f(ot.patch,q):Le=f(ot.patch,q):Le=f(ot.patch,q);let Xs=Le;e=L,t=j,r=N,n=E,i=w,s=v,o=A,u=d+1,l=g,a=k,p=C,m=Xs,$=I,y=ot.events}else{let N=W,L=_.tail,U=R,O=b.tail,G=et(d-v,N),M,ze=qe(J,k,d,U);M=Fe(ze,I,k,d,N);let ye=M;e=O,t=j,r=L,n=E,i=w,s=v,o=A,u=d+1,l=g,a=k,p=f(G,C),m=q,$=I,y=ye}}else{let z=W,D=_.tail,N=R,L=b.tail,U=et(d-v,z),O,M=qe(J,k,d,N);O=Fe(M,I,k,d,z);let Y=O;e=L,t=j,r=D,n=E,i=w,s=v,o=A,u=d+1,l=g,a=k,p=f(U,C),m=q,$=I,y=Y}}else if(R instanceof pe){let W=_.head;if(W instanceof pe){let z=W;if(R.content===z.content){let N=_.tail;e=b.tail,t=j,r=N,n=E,i=w,s=v,o=A,u=d+1,l=g,a=k,p=C,m=q,$=I,y=J}else{let N=W,L=_.tail,U=b.tail,O=vn(d,0,c([hs(N.content)]),T);e=U,t=j,r=L,n=E,i=w,s=v,o=A,u=d+1,l=g,a=k,p=C,m=f(O,q),$=I,y=J}}else{let z=W,D=_.tail,N=R,L=b.tail,U=et(d-v,z),O,M=qe(J,k,d,N);O=Fe(M,I,k,d,z);let Y=O;e=L,t=j,r=D,n=E,i=w,s=v,o=A,u=d+1,l=g,a=k,p=f(U,C),m=q,$=I,y=Y}}else{let W=_.head;if(W instanceof Ke){let z=W,D=_.tail,N=R,L=b.tail,U=We(I,z.mapper),O=_e(k,d,z.key),G=bs(!1,O,U,J,N.attributes,z.attributes,T,T),M,Y,ze;M=G.added,Y=G.removed,ze=G.events;let ye;Y instanceof h&&M instanceof h?ye=T:ye=c([Sn(M,Y)]);let Ge=ye,st;N.inner_html===z.inner_html?st=Ge:st=f(ms(z.inner_html),Ge);let Le=st,Ve;Le instanceof h?Ve=q:Ve=f(vn(d,0,Le,c([])),q);let Yn=Ve;e=L,t=j,r=D,n=E,i=w,s=v,o=A,u=d+1,l=g,a=k,p=C,m=Yn,$=I,y=ze}else{let z=W,D=_.tail,N=R,L=b.tail,U=et(d-v,z),O,M=qe(J,k,d,N);O=Fe(M,I,k,d,z);let Y=O;e=L,t=j,r=D,n=E,i=w,s=v,o=A,u=d+1,l=g,a=k,p=f(U,C),m=q,$=I,y=Y}}}}}}function Nn(e,t,r){return On(c([t]),ce(),c([r]),ce(),ce(),0,0,0,0,Rt,T,T,te,Ki(e))}var ju=globalThis.setTimeout,In=globalThis.clearTimeout,Eu=(e,t)=>me().createElementNS(e,t),Su=e=>me().createTextNode(e),Tu=()=>me().createDocumentFragment(),yt=(e,t,r)=>e.insertBefore(t,r),ys=ji?(e,t,r)=>e.moveBefore(t,r):yt,Au=(e,t)=>e.removeChild(t),zu=(e,t)=>e.getAttribute(t),gs=(e,t,r)=>e.setAttribute(t,r),Cu=(e,t)=>e.removeAttribute(t),Bu=(e,t,r,n)=>e.addEventListener(t,r,n),vs=(e,t,r)=>e.removeEventListener(t,r),qu=(e,t)=>e.innerHTML=t,Ou=(e,t)=>e.data=t,Oe=Symbol("lustre"),Mn=class{constructor(t,r,n,i){this.kind=t,this.key=i,this.parent=r,this.children=[],this.node=n,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===be?this.node.parentNode:this.node}};var Ne=(e,t,r,n,i)=>{let s=new Mn(e,t,r,i);return r[Oe]=s,t?.children.splice(n,0,s),s},Nu=e=>{let t="";for(let r=e[Oe];r.parent;r=r.parent)if(r.key)t=`${Pt}${r.key}${t}`;else{let n=r.parent.children.indexOf(r);t=`${Pt}${n}${t}`}return t.slice(1)},Tr=class{#e=null;#i=()=>{};#a=!1;#c=!1;constructor(t,r,{useServerEvents:n=!1,exposeKeys:i=!1}={}){this.#e=t,this.#i=r,this.#a=n,this.#c=i}mount(t){Ne(Qe,null,this.#e,0,null),this.#x(this.#e,null,this.#e[Oe],0,t)}push(t){this.#t.push({node:this.#e[Oe],patch:t}),this.#h()}#t=[];#h(){let t=this.#t;for(;t.length;){let{node:r,patch:n}=t.pop(),{children:i}=r,{changes:s,removed:o,children:u}=n;tt(s,l=>this.#s(r,l)),o&&this.#d(r,i.length-o,o),tt(u,l=>{let a=i[l.index|0];this.#t.push({node:a,patch:l})})}}#s(t,r){switch(r.kind){case kn:this.#v(t,r);break;case jn:this.#w(t,r);break;case En:this.#m(t,r);break;case Tn:this.#o(t,r);break;case An:this.#n(t,r);break;case zn:this.#p(t,r);break;case Cn:this.#f(t,r);break}}#f(t,{children:r,before:n}){let i=Tu(),s=this.#r(t,n);this.#$(i,null,t,n|0,r),yt(t.parentNode,i,s)}#p(t,{index:r,with:n}){this.#d(t,r|0,1);let i=this.#r(t,r);this.#x(t.parentNode,i,t,r|0,n)}#r(t,r){r=r|0;let{children:n}=t,i=n.length;if(r<i)return n[r].node;let s=n[i-1];if(!s&&t.kind!==be)return null;for(s||(s=t);s.kind===be&&s.children.length;)s=s.children[s.children.length-1];return s.node.nextSibling}#o(t,{key:r,before:n}){n=n|0;let{children:i,parentNode:s}=t,o=i[n].node,u=i[n];for(let m=n+1;m<i.length;++m){let $=i[m];if(i[m]=u,u=$,$.key===r){i[n]=$;break}}let{kind:l,node:a,children:p}=u;ys(s,a,o),l===be&&this.#u(s,p,o)}#u(t,r,n){for(let i=0;i<r.length;++i){let{kind:s,node:o,children:u}=r[i];ys(t,o,n),s===be&&this.#u(t,u,n)}}#n(t,{index:r}){this.#d(t,r,1)}#d(t,r,n){let{children:i,parentNode:s}=t,o=i.splice(r,n);for(let u=0;u<o.length;++u){let{kind:l,node:a,children:p}=o[u];Au(s,a),this.#l(o[u]),l===be&&o.push(...p)}}#l(t){let{debouncers:r,children:n}=t;for(let{timeout:i}of r.values())i&&In(i);r.clear(),tt(n,i=>this.#l(i))}#m({node:t,handlers:r,throttles:n,debouncers:i},{added:s,removed:o}){tt(o,({name:u})=>{r.delete(u)?(vs(t,u,Ln),this.#_(n,u,0),this.#_(i,u,0)):(Cu(t,u),js[u]?.removed?.(t,u))}),tt(s,u=>this.#g(t,u))}#v({node:t},{content:r}){Ou(t,r??"")}#w({node:t},{inner_html:r}){qu(t,r??"")}#$(t,r,n,i,s){tt(s,o=>this.#x(t,r,n,i++,o))}#x(t,r,n,i,s){switch(s.kind){case Qe:{let o=this.#b(n,i,s);this.#$(o,null,o[Oe],0,s.children),yt(t,o,r);break}case $t:{let o=this.#y(n,i,s);yt(t,o,r);break}case be:{let o=this.#y(n,i,s);yt(t,o,r),this.#$(t,r,o[Oe],0,s.children);break}case Vi:{let o=this.#b(n,i,s);this.#w({node:o},s),yt(t,o,r);break}}}#b(t,r,{kind:n,key:i,tag:s,namespace:o,attributes:u}){let l=Eu(o||cr,s);return Ne(n,t,l,r,i),this.#c&&i&&gs(l,"data-lustre-key",i),tt(u,a=>this.#g(l,a)),l}#y(t,r,{kind:n,key:i,content:s}){let o=Su(s??"");return Ne(n,t,o,r,i),o}#g(t,r){let{debouncers:n,handlers:i,throttles:s}=t[Oe],{kind:o,name:u,value:l,prevent_default:a,debounce:p,throttle:m}=r;switch(o){case tn:{let $=l??"";if(u==="virtual:defaultValue"){t.defaultValue=$;return}$!==zu(t,u)&&gs(t,u,$),js[u]?.added?.(t,$);break}case Oi:t[u]=l;break;case Ni:{i.has(u)&&vs(t,u,Ln);let $=a.kind===Ii;Bu(t,u,Ln,{passive:$}),this.#_(s,u,m),this.#_(n,u,p),i.set(u,y=>this.#k(r,y));break}}}#_(t,r,n){let i=t.get(r);if(n>0)i?i.delay=n:t.set(r,{delay:n});else if(i){let{timeout:s}=i;s&&In(s),t.delete(r)}}#k(t,r){let{currentTarget:n,type:i}=r,{debouncers:s,throttles:o}=n[Oe],u=Nu(n),{prevent_default:l,stop_propagation:a,include:p,immediate:m}=t;l.kind===rn&&r.preventDefault(),a.kind===rn&&r.stopPropagation(),i==="submit"&&(r.detail??={},r.detail.formData=[...new FormData(r.target,r.submitter).entries()]);let $=this.#a?Iu(r,p??[]):r,y=o.get(i);if(y){let j=Date.now(),_=y.last||0;j>_+y.delay&&(y.last=j,y.lastEvent=r,this.#i($,u,i,m))}let b=s.get(i);b&&(In(b.timeout),b.timeout=ju(()=>{r!==o.get(i)?.lastEvent&&this.#i($,u,i,m)},b.delay)),!y&&!b&&this.#i($,u,i,m)}},tt=(e,t)=>{if(Array.isArray(e))for(let r=0;r<e.length;r++)t(e[r]);else if(e)for(e;e.head;e=e.tail)t(e.head)},Ln=e=>{let{currentTarget:t,type:r}=e;t[Oe].handlers.get(r)(e)},Iu=(e,t=[])=>{let r={};(e.type==="input"||e.type==="change")&&t.push("target.value"),e.type==="submit"&&t.push("detail.formData");for(let n of t){let i=n.split(".");for(let s=0,o=e,u=r;s<i.length;s++){if(s===i.length-1){u[i[s]]=o[i[s]];break}u=u[i[s]]??={},o=o[i[s]]}}return r},ks=e=>({added(t){t[e]=!0},removed(t){t[e]=!1}}),Lu=e=>({added(t,r){t[e]=r}}),js={checked:ks("checked"),selected:ks("selected"),value:Lu("value"),autofocus:{added(e){queueMicrotask(()=>{e.focus?.()})}},autoplay:{added(e){try{e.play?.()}catch(t){console.error(t)}}}};function Mu(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof h)return[i,H(s)];{let o=n.tail,u=n.head[0],l=n.head[1],a=Gi(u,l),p;u===""?p=i:p=Xe(i,u,a);let m=p,$=f(a,s);e=o,t=m,r=$}}}function Un(e){return Mu(e,ce(),T)}function Es(e,t,r){let n=Un(r),i,s;return i=n[0],s=n[1],Gt("",te,"",e,t,s,i,!1,!1)}function Ss(e,t,r,n){let i=Un(n),s,o;return s=i[0],o=i[1],Gt("",te,e,t,r,o,s,!1,!1)}function Ts(e){let t=Un(e),r,n;return r=t[0],n=t[1],cn("",te,n,r)}var As=e=>{let t=Ne(Qe,null,e,0,null),r=0;for(let o=e.firstChild;o;o=o.nextSibling)zs(o)&&(r+=1);if(r===0){let o=me().createTextNode("");return Ne($t,t,o,0,null),e.replaceChildren(o),ns()}if(r===1)return Dn(t,e).head[1];let n=me().createTextNode(""),i=Ne(be,t,n,0,null),s=Dn(i,e);return e.insertBefore(n,e.firstChild),Ts(s)},zs=e=>{switch(e.nodeType){case fr:return!0;case Zr:return!!e.data;default:return!1}},Uu=(e,t,r,n)=>{if(!zs(t))return null;switch(t.nodeType){case fr:{let i=Ne(Qe,e,t,n,r),s=t.localName,o=t.namespaceURI,u=!o||o===cr;u&&Du.includes(s)&&Wu(s,t);let l=Fu(t),a=Dn(i,t);return u?Es(s,l,a):Ss(o,s,l,a)}case Zr:return Ne($t,e,t,n,null),kr(t.data);default:return null}},Du=["input","select","textarea"],Wu=(e,t)=>{let r=t.value,n=t.checked;e==="input"&&t.type==="checkbox"&&!n||e==="input"&&t.type==="radio"&&!n||t.type!=="checkbox"&&t.type!=="radio"&&!r||queueMicrotask(()=>{t.value=r,t.checked=n,t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0})),me().activeElement!==t&&t.dispatchEvent(new Event("blur",{bubbles:!0}))})},Dn=(e,t)=>{let r=null,n=t.firstChild,i=null,s=0;for(;n;){let o=n.nodeType===fr?n.getAttribute("data-lustre-key"):null;o!=null&&n.removeAttribute("data-lustre-key");let u=Uu(e,n,o,s),l=n.nextSibling;if(u){let a=new xe([o??"",u],null);i?i=i.tail=a:i=r=a,s+=1}else t.removeChild(n);n=l}return i?(i.tail=T,r):T},Fu=e=>{let t=e.attributes.length,r=T;for(;t-- >0;){let n=e.attributes[t];n.name!=="xmlns"&&(r=new xe(Pu(n),r))}return r},Pu=e=>{let t=e.localName,r=e.value;return Ee(t,r)};var rt=()=>!!me();var Jt=class{constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#i=i,this.#a=s,this.root.addEventListener("context-request",o=>{if(!(o.context&&o.callback)||!this.#s.has(o.context))return;o.stopImmediatePropagation();let u=this.#s.get(o.context);if(o.subscribe){let l=new WeakRef(o.callback),a=()=>{u.subscribers=u.subscribers.filter(p=>p!==l)};u.subscribers.push([l,a]),o.callback(u.value,a)}else o.callback(u.value)}),this.#h=new Tr(this.root,(o,u,l)=>{let[a,p]=Ht(this.#t,u,l,o);if(this.#t=a,p.isOk()){let m=p[0];m.stop_propagation&&o.stopPropagation(),m.prevent_default&&o.preventDefault(),this.dispatch(m.message,!1)}}),this.#c=As(this.root),this.#t=Xi(),this.#n=!0,this.#l(n)}root=null;dispatch(t,r=!1){if(this.#n||=r,this.#f)this.#p.push(t);else{let[n,i]=this.#a(this.#e,t);this.#e=n,this.#l(i)}}emit(t,r){(this.root.host??this.root).dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0}))}provide(t,r){if(!this.#s.has(t))this.#s.set(t,{value:r,subscribers:[]});else{let n=this.#s.get(t);n.value=r;for(let i=n.subscribers.length-1;i>=0;i--){let[s,o]=n.subscribers[i],u=s.deref();if(!u){n.subscribers.splice(i,1);continue}u(r,o)}}}#e;#i;#a;#c;#t;#h;#s=new Map;#f=!1;#p=[];#r=T;#o=T;#u=null;#n=!1;#d={dispatch:(t,r)=>this.dispatch(t,r),emit:(t,r)=>this.emit(t,r),select:()=>{},root:()=>this.root,provide:(t,r)=>this.provide(t,r)};#l(t){for(this.#f=!0;;){for(let r=t.synchronous;r.tail;r=r.tail)r.head(this.#d);if(this.#r=Bs(this.#r,t.before_paint),this.#o=Bs(this.#o,t.after_paint),!this.#p.length)break;[this.#e,t]=this.#a(this.#e,this.#p.shift())}this.#f=!1,this.#n?(cancelAnimationFrame(this.#u),this.#m()):this.#u||(this.#u=requestAnimationFrame(()=>{this.#m()}))}#m(){this.#n=!1,this.#u=null;let t=this.#i(this.#e),{patch:r,events:n}=Nn(this.#t,this.#c,t);if(this.#t=n,this.#c=t,this.#h.push(r),this.#r instanceof xe){let i=Cs(this.#r);this.#r=T,queueMicrotask(()=>{this.#n=!0,this.#l(i)})}if(this.#o instanceof xe){let i=Cs(this.#o);this.#o=T,requestAnimationFrame(()=>{this.#n=!0,this.#l(i)})}}};function Cs(e){return{synchronous:e,after_paint:T,before_paint:T}}function Bs(e,t){return e instanceof h?t:t instanceof h?e:zt(e,t)}var nt=class extends x{constructor(t){super(),this.message=t}},gt=class extends x{constructor(t,r){super(),this.name=t,this.data=r}};var it=class extends x{};var Wn=class extends x{constructor(t,r,n,i,s,o,u,l,a,p){super(),this.open_shadow_root=t,this.adopt_styles=r,this.delegates_focus=n,this.attributes=i,this.properties=s,this.contexts=o,this.is_form_associated=u,this.on_form_autofill=l,this.on_form_reset=a,this.on_form_restore=p}};function Ns(e){let t=new Wn(!0,!0,!1,T,T,T,!1,pr,pr,pr);return we(e,t,(r,n)=>n.apply(r))}var Fn=class{#e;constructor(t,[r,n],i,s){this.#e=new Jt(t,[r,n],s,i)}send(t){switch(t.constructor){case nt:{this.dispatch(t.message,!1);break}case gt:{this.emit(t.name,t.data);break}case it:break}}dispatch(t,r){this.#e.dispatch(t,r)}emit(t,r){this.#e.emit(t,r)}},Ls=({init:e,update:t,view:r},n,i)=>{if(!rt())return new B(new vt);let s=n instanceof HTMLElement?n:me().querySelector(n);return s?new S(new Fn(s,e(i),t,r)):new B(new Ar(n))};var Pn=class extends x{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.config=i}};var Ar=class extends x{constructor(t){super(),this.selector=t}},vt=class extends x{};function Ms(e,t,r){return new Pn(e,t,r,Ns(T))}function Us(e,t,r){return ar(!rt(),new B(new vt),()=>Ls(e,t,r))}var el={handle_external_links:!1,handle_internal_links:!0},Fs=globalThis?.window?.location?.href,Gn=()=>Fs?new S(Rn(new URL(Fs))):new B(void 0),Vn=(e,t=el)=>{document.addEventListener("click",r=>{let n=Ps(r.target);if(n)try{let i=new URL(n.href),s=Rn(i),o=i.host!==window.location.host;return!t.handle_external_links&&o||!t.handle_internal_links&&!o?void 0:(r.preventDefault(),o||(window.history.pushState({},"",n.href),window.requestAnimationFrame(()=>{i.hash?document.getElementById(i.hash.slice(1))?.scrollIntoView():window.scrollTo(0,0)})),e(s))}catch{return}}),window.addEventListener("popstate",r=>{r.preventDefault();let n=new URL(window.location.href),i=Rn(n);window.requestAnimationFrame(()=>{n.hash?document.getElementById(n.hash.slice(1))?.scrollIntoView():window.scrollTo(0,0)}),e(i)}),window.addEventListener("modem-push",({detail:r})=>{e(r)}),window.addEventListener("modem-replace",({detail:r})=>{e(r)})};var Ps=e=>!e||e.tagName==="BODY"?null:e.tagName==="A"?e:Ps(e.parentElement),Rn=e=>new Nt(e.protocol?new K(e.protocol.slice(0,-1)):new Q,new Q,e.hostname?new K(e.hostname):new Q,e.port?new K(Number(e.port)):new Q,e.pathname,e.search?new K(e.search.slice(1)):new Q,e.hash?new K(e.hash.slice(1)):new Q);function Rs(e){return Wi(t=>ar(!rt(),void 0,()=>Vn(r=>{let i=e(r);return t(i)})))}var Xt=class extends x{constructor(t,r,n,i){super(),this.id=t,this.title=r,this.summary=n,this.text=i}},Gs=c([new Xt(1,"The Empty Chair","A guide to uninvited furniture and its temporal implications",`
      There's an empty chair in my home that wasn't there yesterday. When I sit
      in it, I start to remember things that haven't happened yet. The chair is
      getting closer to my bedroom each night, though I never caught it move.
      Last night, I dreamt it was watching me sleep. This morning, it offered
      me coffee.
    `),new Xt(2,"The Library of Unwritten Books","Warning: Reading this may shorten your narrative arc",`
      Between the shelves in the public library exists a thin space where
      books that were never written somehow exist. Their pages change when you
      blink. Forms shifting to match the souls blueprint. Librarians warn
      against reading the final chapter of any unwritten book \u2013 those who do
      find their own stories mysteriously concluding. Yourself is just another
      draft to be rewritten.
    `),new Xt(3,"The Hum","A frequency analysis of the collective forgetting",`
      The citywide hum started Tuesday. Not everyone can hear it, but those who
      can't are slowly being replaced by perfect copies who smile too widely.
      The hum isn't sound \u2013 it's the universe forgetting our coordinates.
      Reports suggest humming back in harmony might postpone whatever comes
      next. Or perhaps accelerate it.
    `)]);var rl="src/portfolio.gleam",Pe=class extends x{},Ie=class extends x{},Re=class extends x{constructor(t){super(),this.id=t}},kt=class extends x{constructor(t){super(),this.uri=t}},zr=class extends x{constructor(t,r){super(),this.posts=t,this.route=r}},Hn=class extends x{constructor(t){super(),this.route=t}};function nl(e,t){let r=t.route;return[new zr(e.posts,r),Dt()]}function il(){return is(c([]),c([Er(c([ht("social-links")]),c([Te(c([mt("https://github.com/eltonsst"),Mt("_blank"),Ut("noopener noreferrer")]),c([ie("Github")])),Te(c([mt("https://linkedin.com/in/elton-stafa-bb802414a"),Mt("_blank"),Ut("noopener noreferrer")]),c([ie("LinkedIn")])),Te(c([mt("https://x.com/eltonsst"),Mt("_blank"),Ut("noopener noreferrer")]),c([ie("X")])),Te(c([mt("https://instagram.com/eltonsst"),Mt("_blank"),Ut("noopener noreferrer")]),c([ie("Instagram")]))]))]))}function Cr(e){return us(c([]),c([ie(e)]))}function Kt(e){return wt(c([]),c([ie(e)]))}function Hs(){return c([Cr("Not found"),Kt(`You glimpse into the void and see -- nothing?
       Well that was somewhat expected.`)])}function Qt(e){let t;if(e instanceof Pe)t="/";else if(e instanceof Ie)t="/posts";else if(e instanceof Re){let n=e.id;t="/post/"+Be(n)}else t="/404";return mt(t)}function sl(e,t,r){let n;return e instanceof Ie&&t instanceof Re?n=!0:n=X(t,e),cs(c([Mi(c([["active",n]]))]),c([Te(c([Qt(e)]),c([ie(r)]))]))}function ol(e){let t,r=e.posts,n=Vr(r),i=Ct(n,(o,u)=>sr(o.id,u.id));t=je(i,o=>jr(c([]),c([hn(c([]),c([Te(c([Qt(new Re(o.id))]),c([ie(o.title)]))])),wt(c([]),c([ie(o.summary)]))])));let s=t;return f(mn(c([])),f(Cr("Posts"),s))}function Ys(e,t){return Te(c([Qt(e)]),c([ie(t)]))}function ul(e,t){let r=Me(e.posts,t);if(r instanceof S){let n=r[0];return c([mn(c([])),jr(c([]),c([Cr(n.title),Kt(n.summary),Kt(n.text)])),wt(c([]),c([Ys(new Ie,"<- Go back?")]))])}else return Hs()}function Vs(e){let t=bi(e.path);if(t instanceof h)return new Pe;{let r=t.tail;if(r instanceof h){let n=t.head;return n===""?new Pe:n==="posts"?new Ie:new kt(e)}else if(r.tail instanceof h)if(t.head==="post"){let s=r.head,o=Gr(s);if(o instanceof S){let u=o[0];return new Re(u)}else return new kt(e)}else return new kt(e);else return new kt(e)}}function ll(e){let t,r=Gn();if(r instanceof S){let p=r[0];t=Vs(p)}else t=new Pe;let n=t,i,o=je(Gs,p=>[p.id,p]);i=ir(o);let u=i,l=new zr(u,n),a=Rs(p=>new Hn(Vs(p)));return[l,a]}function al(e){let t=(()=>{let n=lr(e);return li(n,sr)})();if(t instanceof S){let r=t[0];return Me(e,r)}else return new B(void 0)}function cl(e){let t=al(e.posts);return c([ps(c([Di("/about.jpg"),Ui("About me"),ht("profile-image-content")])),Cr("Hello, Joe"),Kt(`Or whoever you may be! This is were I will share random ramblings
       and thoughts about life.`),wt(c([]),c([ie("There is not much going on at the moment, but you can still "),Ys(new Ie,"read my ramblings ->")])),Kt("And don't forget to read my last post <3"),(()=>{if(t instanceof S){let r=t[0];return jr(c([ht("last-post")]),c([hn(c([]),c([Te(c([Qt(new Re(r.id))]),c([ie(r.title)]))])),wt(c([]),c([ie(r.summary)]))]))}else return Er(c([]),c([]))})(),il()])}function fl(e){return Er(c([]),c([ss(c([]),c([os(c([]),c([Te(c([Qt(new Pe)]),c([ie("<eltonsst>")]))]))])),as(c([ht("secondary-nav")]),c([fs(c([]),c([sl(new Ie,e.route,"Posts")]))])),ls(c([]),(()=>{let t=e.route;if(t instanceof Pe)return cl(e);if(t instanceof Ie)return ol(e);if(t instanceof Re){let r=t.id;return ul(e,r)}else return Hs()})())]))}function Js(){let e=Ms(ll,nl,fl),t=Us(e,"#app",void 0);if(!(t instanceof S))throw er("let_assert",rl,"portfolio",15,"main","Pattern match failed, no pattern matched the value.",{value:t,start:361,end:410,pattern_start:372,pattern_end:377})}Js();
